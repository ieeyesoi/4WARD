<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>CBNU SW 포털 - 게시글 상세</title>
  <link rel="stylesheet" href="header.css">
  <link rel="stylesheet" href="footer.css">
  <link rel="stylesheet" href="post.css">
</head>
<body>
  <div id="header"></div>

  <main class="post-main">
    <aside class="post-filter">
      <div class="filter-category">
        <strong>Category</strong>
        <div><span class="cat-icon">📝</span> 스터디 모집</div>
        <div><span class="cat-icon">👥</span> 팀원 모집</div>
        <div><span class="cat-icon">💬</span> 자유게시판</div>
      </div>
    </aside>

    <section class="post-detail-section">
      <div class="post-img-preview">
        <img src="https://placehold.co/540x200?text=이미지" alt="썸네일" />
      </div>
      <div class="post-author-row">
        <div class="user-icon">👤</div>
        <div>
          <div class="author-name">작성자</div>
          <div class="created-time">1분 전 작성됨</div>
          <span id="viewCount" class="viewCount">조회수: 0</span> <!-- ✅ 이 줄 추가 -->
        </div>
      </div>
      <div class="post-content">
        <div class="post-title"></div>
        <div class="post-body"></div>
      </div>

      <!-- 수정 버튼 -->
      <div class="post-actions">
        <button id="editBtn" class="edit-btn">
          <i class="fas fa-pen"></i> 수정
        </button>
        <button id="deleteBtn" class="delete-btn">
          <i class="fas fa-trash-alt"></i> 삭제
        </button>
      </div>

      <!-- ✅ 글 수정 모달 (글 작성과 동일한 구성) -->
      <div id="editModalOverlay" class="modal-overlay hidden">
        <div class="modal">
          <button id="editModalClose" class="modal-close">×</button>
          <h2>글 수정하기</h2>
          <form id="editForm" class="post-form">
            <div class="img-preview">
              <img id="previewImage" src="https://placehold.co/350x140?text=이미지" alt="미리보기" />
            </div>
            <div class="upload-img">
              <label for="imageUpload">이미지 수정:</label>
              <input type="file" id="imageUpload" accept="image/*">
            </div>
            <div class="category-checkboxes">
              <label><input type="checkbox" value="스터디 모집" /> 스터디 모집</label>
              <label><input type="checkbox" value="팀원 모집" /> 팀원 모집</label>
              <label><input type="checkbox" value="자유게시판" /> 자유게시판</label>
            </div>
            <input type="text" id="editTitle" placeholder="제목" required />
            <textarea id="editContent" rows="6" placeholder="수정할 내용을 입력하세요" required></textarea>
            <div class="form__btns">
              <button type="submit">수정 완료</button>
            </div>
          </form>
        </div>
      </div>


      <div class="post-meta-row">
        <span id="commentCount">댓글 수</span> <!-- 동적으로 바뀔 자리 -->
        <span class="meta-divider">|</span>
        <span class="meta-comment">💬 Comment</span>
      </div>

      <div id="comments"></div>

      <form id="commentForm" class="comment-form">
        <input id="commentInput" type="text" placeholder="댓글을 입력하세요" autocomplete="off" />
        <label><input type="checkbox" id="anonymousCommentCheck">익명</label>
        <button type="submit" class="send-btn">🚀 보내기</button>
      </form>
    </section>
  </main>

  <div id="footer"></div>
  <script>
    fetch("footer.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      });
  </script>
  <script src="post.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
  <script src="session.js"></script>
  <script src="header.js"></script>
</body>
</html>
